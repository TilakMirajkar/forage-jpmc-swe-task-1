From 9cabc59ea46415ce18832c84eaab41fbcb0e502a Mon Sep 17 00:00:00 2001
From: TilakMirajkar <teeluck2003@gmail.com>
Date: Fri, 2 Aug 2024 23:41:31 +0530
Subject: [PATCH] initial

---
 0001-Re-add-sample-unit-test.patch | 44 -------------
 0001-initial-commit.patch          | 99 ------------------------------
 client_test.py                     | 50 ++++++++++-----
 3 files changed, 35 insertions(+), 158 deletions(-)
 delete mode 100644 0001-Re-add-sample-unit-test.patch
 delete mode 100644 0001-initial-commit.patch

diff --git a/0001-Re-add-sample-unit-test.patch b/0001-Re-add-sample-unit-test.patch
deleted file mode 100644
index 39f7b59..0000000
--- a/0001-Re-add-sample-unit-test.patch
+++ /dev/null
@@ -1,44 +0,0 @@
-From 879221fec2b863d37d5b493f02a530a8098ef6ef Mon Sep 17 00:00:00 2001
-From: Joe Ferrer <joe@theforage.com>
-Date: Wed, 1 Mar 2023 00:11:51 +1100
-Subject: [PATCH] Re-add sample unit test
-
----
- client_test.py | 25 +++++++++++++++++++++++++
- 1 file changed, 25 insertions(+)
- create mode 100644 client_test.py
-
-diff --git a/client_test.py b/client_test.py
-new file mode 100644
-index 0000000..af2bf26
---- /dev/null
-+++ b/client_test.py
-@@ -0,0 +1,25 @@
-+import unittest
-+from client3 import getDataPoint
-+
-+class ClientTest(unittest.TestCase):
-+  def test_getDataPoint_calculatePrice(self):
-+    quotes = [
-+      {'top_ask': {'price': 121.2, 'size': 36}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 120.48, 'size': 109}, 'id': '0.109974697771', 'stock': 'ABC'},
-+      {'top_ask': {'price': 121.68, 'size': 4}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 117.87, 'size': 81}, 'id': '0.109974697771', 'stock': 'DEF'}
-+    ]
-+    """ ------------ Add the assertion below ------------ """
-+
-+  def test_getDataPoint_calculatePriceBidGreaterThanAsk(self):
-+    quotes = [
-+      {'top_ask': {'price': 119.2, 'size': 36}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 120.48, 'size': 109}, 'id': '0.109974697771', 'stock': 'ABC'},
-+      {'top_ask': {'price': 121.68, 'size': 4}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 117.87, 'size': 81}, 'id': '0.109974697771', 'stock': 'DEF'}
-+    ]
-+    """ ------------ Add the assertion below ------------ """
-+
-+
-+  """ ------------ Add more unit tests ------------ """
-+
-+
-+
-+if __name__ == '__main__':
-+    unittest.main()
--- 
-2.45.2.windows.1
-
diff --git a/0001-initial-commit.patch b/0001-initial-commit.patch
deleted file mode 100644
index c186785..0000000
--- a/0001-initial-commit.patch
+++ /dev/null
@@ -1,99 +0,0 @@
-From 94c09995d5c9f545a0b9b1f1c01a34fd804bad8a Mon Sep 17 00:00:00 2001
-From: TilakMirajkar <teeluck2003@gmail.com>
-Date: Fri, 2 Aug 2024 23:33:11 +0530
-Subject: [PATCH] initial commit
-
----
- 0001-Re-add-sample-unit-test.patch | 44 ++++++++++++++++++++++++++++++
- client3.py                         | 10 +++++--
- 2 files changed, 51 insertions(+), 3 deletions(-)
- create mode 100644 0001-Re-add-sample-unit-test.patch
-
-diff --git a/0001-Re-add-sample-unit-test.patch b/0001-Re-add-sample-unit-test.patch
-new file mode 100644
-index 0000000..39f7b59
---- /dev/null
-+++ b/0001-Re-add-sample-unit-test.patch
-@@ -0,0 +1,44 @@
-+From 879221fec2b863d37d5b493f02a530a8098ef6ef Mon Sep 17 00:00:00 2001
-+From: Joe Ferrer <joe@theforage.com>
-+Date: Wed, 1 Mar 2023 00:11:51 +1100
-+Subject: [PATCH] Re-add sample unit test
-+
-+---
-+ client_test.py | 25 +++++++++++++++++++++++++
-+ 1 file changed, 25 insertions(+)
-+ create mode 100644 client_test.py
-+
-+diff --git a/client_test.py b/client_test.py
-+new file mode 100644
-+index 0000000..af2bf26
-+--- /dev/null
-++++ b/client_test.py
-+@@ -0,0 +1,25 @@
-++import unittest
-++from client3 import getDataPoint
-++
-++class ClientTest(unittest.TestCase):
-++  def test_getDataPoint_calculatePrice(self):
-++    quotes = [
-++      {'top_ask': {'price': 121.2, 'size': 36}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 120.48, 'size': 109}, 'id': '0.109974697771', 'stock': 'ABC'},
-++      {'top_ask': {'price': 121.68, 'size': 4}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 117.87, 'size': 81}, 'id': '0.109974697771', 'stock': 'DEF'}
-++    ]
-++    """ ------------ Add the assertion below ------------ """
-++
-++  def test_getDataPoint_calculatePriceBidGreaterThanAsk(self):
-++    quotes = [
-++      {'top_ask': {'price': 119.2, 'size': 36}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 120.48, 'size': 109}, 'id': '0.109974697771', 'stock': 'ABC'},
-++      {'top_ask': {'price': 121.68, 'size': 4}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 117.87, 'size': 81}, 'id': '0.109974697771', 'stock': 'DEF'}
-++    ]
-++    """ ------------ Add the assertion below ------------ """
-++
-++
-++  """ ------------ Add more unit tests ------------ """
-++
-++
-++
-++if __name__ == '__main__':
-++    unittest.main()
-+-- 
-+2.45.2.windows.1
-+
-diff --git a/client3.py b/client3.py
-index 3fc09b7..821458b 100644
---- a/client3.py
-+++ b/client3.py
-@@ -35,14 +35,16 @@ def getDataPoint(quote):
-     stock = quote['stock']
-     bid_price = float(quote['top_bid']['price'])
-     ask_price = float(quote['top_ask']['price'])
--    price = bid_price
-+    price = (bid_price + ask_price) / 2
-     return stock, bid_price, ask_price, price
- 
- 
- def getRatio(price_a, price_b):
-     """ Get ratio of price_a and price_b """
-     """ ------------- Update this function ------------- """
--    return 1
-+    if price_b == 0:
-+        return
-+    return price_a / price_b
- 
- 
- # Main
-@@ -52,8 +54,10 @@ if __name__ == "__main__":
-         quotes = json.loads(urllib.request.urlopen(QUERY.format(random.random())).read())
- 
-         """ ----------- Update to get the ratio --------------- """
-+        prices = {}
-         for quote in quotes:
-             stock, bid_price, ask_price, price = getDataPoint(quote)
-+            prices[stock] = price
-             print("Quoted %s at (bid:%s, ask:%s, price:%s)" % (stock, bid_price, ask_price, price))
- 
--        print("Ratio %s" % getRatio(price, price))
-+        print("Ratio %s" % getRatio(prices["ABC"], prices["DEF"]))
--- 
-2.45.2.windows.1
-
diff --git a/client_test.py b/client_test.py
index af2bf26..48f4f34 100644
--- a/client_test.py
+++ b/client_test.py
@@ -1,24 +1,44 @@
 import unittest
 from client3 import getDataPoint
 
-class ClientTest(unittest.TestCase):
-  def test_getDataPoint_calculatePrice(self):
-    quotes = [
-      {'top_ask': {'price': 121.2, 'size': 36}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 120.48, 'size': 109}, 'id': '0.109974697771', 'stock': 'ABC'},
-      {'top_ask': {'price': 121.68, 'size': 4}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 117.87, 'size': 81}, 'id': '0.109974697771', 'stock': 'DEF'}
-    ]
-    """ ------------ Add the assertion below ------------ """
-
-  def test_getDataPoint_calculatePriceBidGreaterThanAsk(self):
-    quotes = [
-      {'top_ask': {'price': 119.2, 'size': 36}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 120.48, 'size': 109}, 'id': '0.109974697771', 'stock': 'ABC'},
-      {'top_ask': {'price': 121.68, 'size': 4}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 117.87, 'size': 81}, 'id': '0.109974697771', 'stock': 'DEF'}
-    ]
-    """ ------------ Add the assertion below ------------ """
 
+class ClientTest(unittest.TestCase):
+    def test_getDataPoint_calculatePrice(self):
+        quotes = [
+            {'top_ask': {'price': 121.2, 'size': 36}, 'timestamp': '2019-02-11 22:06:30.572453',
+             'top_bid': {'price': 120.48, 'size': 109}, 'id': '0.109974697771', 'stock': 'ABC'},
+            {'top_ask': {'price': 121.68, 'size': 4}, 'timestamp': '2019-02-11 22:06:30.572453',
+             'top_bid': {'price': 117.87, 'size': 81}, 'id': '0.109974697771', 'stock': 'DEF'}
+        ]
+        """ ------------ Add the assertion below ------------ """
+        for quote in quotes:
+            self.assertEqual(getDataPoint(quote), (quote['stock'], quote['top_bid']['price'], quote['top_ask']['price'],
+                                                   (quote['top_bid']['price'] + quote['top_ask']['price']) / 2))
 
-  """ ------------ Add more unit tests ------------ """
+    def test_getDataPoint_calculatePriceBidGreaterThanAsk(self):
+        quotes = [
+            {'top_ask': {'price': 119.2, 'size': 36}, 'timestamp': '2019-02-11 22:06:30.572453',
+             'top_bid': {'price': 120.48, 'size': 109}, 'id': '0.109974697771', 'stock': 'ABC'},
+            {'top_ask': {'price': 121.68, 'size': 4}, 'timestamp': '2019-02-11 22:06:30.572453',
+             'top_bid': {'price': 117.87, 'size': 81}, 'id': '0.109974697771', 'stock': 'DEF'}
+        ]
+        """ ------------ Add the assertion below ------------ """
+        for quote in quotes:
+            self.assertEqual(getDataPoint(quote), (quote['stock'], quote['top_bid']['price'], quote['top_ask']['price'],
+                                                   (quote['top_bid']['price'] + quote['top_ask']['price']) / 2))
 
+    """ ------------ Add more unit tests ------------ """
+    def test_getDataPoint_calculatePriceBidGreaterThanAsk(self):
+        quotes = [
+            {'top_ask': {'price': 117.3, 'size': 36}, 'timestamp': '2019-02-11 22:06:30.572453',
+             'top_bid': {'price': 118.48, 'size': 109}, 'id': '0.109974697771', 'stock': 'ABC'},
+            {'top_ask': {'price': 125.68, 'size': 4}, 'timestamp': '2019-02-11 22:06:30.572453',
+             'top_bid': {'price': 119.87, 'size': 81}, 'id': '0.109974697771', 'stock': 'DEF'}
+        ]
+        """ ------------ Add the assertion below ------------ """
+        for quote in quotes:
+            self.assertEqual(getDataPoint(quote), (quote['stock'], quote['top_bid']['price'], quote['top_ask']['price'],
+                                                   (quote['top_bid']['price'] + quote['top_ask']['price']) / 2))
 
 
 if __name__ == '__main__':
-- 
2.45.2.windows.1

